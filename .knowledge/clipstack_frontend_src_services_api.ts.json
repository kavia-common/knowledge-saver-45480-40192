{"is_source_file": true, "format": "TypeScript", "description": "This file defines a set of functions for managing 'clip' items in a web application, including creating, listing, retrieving, updating, deleting clips, and performing a GraphQL search. It also contains type definitions for ClipItem and query parameters.", "external_files": ["./supabase/client"], "external_methods": ["supabase.auth.getUser()", "supabase.from().insert()", "supabase.from().select()", "supabase.from().delete()", "supabase.from().update()", "fetch()"], "published": ["addClip", "listClips", "getClip", "deleteClip", "upsertSummary", "graphQLSearch"], "classes": [], "methods": [{"name": "export async function addClip(input: Omit<ClipItem, 'id' | 'user_id' | 'created_at'>): Promise<C/ addClip", "description": "Inserts a new clip record into the database for the current authenticated user.", "scope": "", "scopeKind": ""}, {"name": "export async function listClips(query?: ListQuery): Promise<ClipItem[]> { listClips", "description": "Retrieves a list of clips for the current user, optionally filtered by source and search query, sorted by creation date.", "scope": "", "scopeKind": ""}, {"name": "export async function getClip(id: string) { getClip", "description": "Fetches a single clip by its ID for the current user.", "scope": "", "scopeKind": ""}, {"name": "export async function deleteClip(id: string) { deleteClip", "description": "Deletes a clip by its ID for the current user.", "scope": "", "scopeKind": ""}, {"name": "export async function upsertSummary(id: string, summary: string) { upsertSummary", "description": "Updates the 'summary' field of a clip identified by its ID.", "scope": "", "scopeKind": ""}, {"name": "export async function graphQLSearch(q: string) { graphQLSearch", "description": "Performs a GraphQL search query against the clips collection, returning matching clips.", "scope": "", "scopeKind": ""}], "calls": ["supabase.auth.getUser", "supabase.from('clips')", "fetch"], "search-terms": ["ClipItem", "supabase", "addClip", "listClips", "getClip", "deleteClip", "upsertSummary", "graphQLSearch"], "state": 2, "file_id": 10, "knowledge_revision": 66, "git_revision": "", "revision_history": [{"24": ""}, {"60": ""}, {"61": ""}, {"64": ""}, {"65": ""}, {"66": ""}], "ctags": [{"_type": "tag", "name": "ClipItem", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^export type ClipItem = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ListQuery", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^type ListQuery = { q?: string; source?: string | null; sort?: 'new' | 'old' };$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "TABLE", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^const TABLE = 'clips';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "addClip", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^export async function addClip(input: Omit<ClipItem, 'id' | 'user_id' | 'created_at'>): Promise<C/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const { data, error } = await req;$/", "language": "TypeScript", "kind": "constant", "scope": "listClips", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const { data, error } = await supabase.from(TABLE).insert(payload).select().single();$/", "language": "TypeScript", "kind": "constant", "scope": "addClip", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const { data, error } = await supabase.from(TABLE).select('*').eq('id', id).eq('user_id', user/", "language": "TypeScript", "kind": "constant", "scope": "getClip", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const { data: userData } = await supabase.auth.getUser();$/", "language": "TypeScript", "kind": "constant", "scope": "addClip", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const { data: userData } = await supabase.auth.getUser();$/", "language": "TypeScript", "kind": "constant", "scope": "deleteClip", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const { data: userData } = await supabase.auth.getUser();$/", "language": "TypeScript", "kind": "constant", "scope": "getClip", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const { data: userData } = await supabase.auth.getUser();$/", "language": "TypeScript", "kind": "constant", "scope": "listClips", "scopeKind": "function"}, {"_type": "tag", "name": "deleteClip", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^export async function deleteClip(id: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "edges", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const edges: unknown = (json as { data?: { clipsCollection?: { edges?: Array<{ node: ClipItem /", "language": "TypeScript", "kind": "constant", "scope": "graphQLSearch", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const { data, error } = await req;$/", "language": "TypeScript", "kind": "constant", "scope": "listClips", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const { data, error } = await supabase.from(TABLE).insert(payload).select().single();$/", "language": "TypeScript", "kind": "constant", "scope": "addClip", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const { data, error } = await supabase.from(TABLE).select('*').eq('id', id).eq('user_id', user/", "language": "TypeScript", "kind": "constant", "scope": "getClip", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const { error } = await supabase.from(TABLE).delete().eq('id', id).eq('user_id', userData.user/", "language": "TypeScript", "kind": "constant", "scope": "deleteClip", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const { error } = await supabase.from(TABLE).update({ summary }).eq('id', id);$/", "language": "TypeScript", "kind": "constant", "scope": "upsertSummary", "scopeKind": "function"}, {"_type": "tag", "name": "getClip", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^export async function getClip(id: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "graphQLSearch", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^export async function graphQLSearch(q: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "graphqlUrl", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const graphqlUrl = `${(supabase as unknown as { supabaseUrl: string }).supabaseUrl}\\/graphql\\//", "language": "TypeScript", "kind": "constant", "scope": "graphQLSearch", "scopeKind": "function"}, {"_type": "tag", "name": "json", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const json: unknown = await res.json();$/", "language": "TypeScript", "kind": "constant", "scope": "graphQLSearch", "scopeKind": "function"}, {"_type": "tag", "name": "listClips", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^export async function listClips(query?: ListQuery): Promise<ClipItem[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "metadata", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^    metadata: (input.metadata ?? null) as Record<string, unknown> | null,$/", "language": "TypeScript", "kind": "constant", "scope": "addClip", "scopeKind": "function"}, {"_type": "tag", "name": "nodes", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const nodes = Array.isArray(edges) ? edges.map((e) => (e as { node: ClipItem }).node) : [];$/", "language": "TypeScript", "kind": "constant", "scope": "graphQLSearch", "scopeKind": "function"}, {"_type": "tag", "name": "null", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^    source: input.source ?? null,$/", "language": "TypeScript", "kind": "constant", "scope": "addClip", "scopeKind": "function"}, {"_type": "tag", "name": "null", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^    summary: input.summary ?? null,$/", "language": "TypeScript", "kind": "constant", "scope": "addClip", "scopeKind": "function"}, {"_type": "tag", "name": "null", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^    title: input.title ?? null,$/", "language": "TypeScript", "kind": "constant", "scope": "addClip", "scopeKind": "function"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const payload: Omit<ClipItem, 'id' | 'created_at'> = {$/", "language": "TypeScript", "kind": "constant", "scope": "addClip", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^  const res = await fetch(graphqlUrl, {$/", "language": "TypeScript", "kind": "constant", "scope": "graphQLSearch", "scopeKind": "function"}, {"_type": "tag", "name": "source", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^    source: input.source ?? null,$/", "language": "TypeScript", "kind": "constant", "scope": "addClip", "scopeKind": "function"}, {"_type": "tag", "name": "summary", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^    summary: input.summary ?? null,$/", "language": "TypeScript", "kind": "constant", "scope": "addClip", "scopeKind": "function"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^    title: input.title ?? null,$/", "language": "TypeScript", "kind": "constant", "scope": "addClip", "scopeKind": "function"}, {"_type": "tag", "name": "upsertSummary", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/services/api.ts", "pattern": "/^export async function upsertSummary(id: string, summary: string) {$/", "language": "TypeScript", "kind": "function"}], "hash": "3da2c7c56fbd9f6804e00b4b7b429a65", "format-version": 4, "code-base-name": "clipstack_frontend", "filename": "clipstack_frontend/src/services/api.ts"}