{"is_source_file": true, "format": "TypeScript", "description": "This file provides a utility function 'generateSummary' that uses OpenAI's API to produce a short summary of given text or URL content. In development, it runs client-side if an API key is available, with a fallback mechanism if not.", "external_files": ["fetch (built-in or global function for network requests)"], "external_methods": ["fetch"], "published": ["generateSummary"], "classes": [], "methods": [{"name": "export async function generateSummary(input: { url?: string; text?: string }): Promise<string> { generateSummary", "description": "Asynchronously generates a concise summary from provided text or URL, utilizing OpenAI's chat completion API. Falls back to a naive summary if API key is absent or fetch fails.", "scope": "", "scopeKind": ""}], "calls": ["fetch"], "search-terms": ["generateSummary", "ai.ts", "OpenAI API", "summary generation", "chat/completions", "client-side summarization"], "state": 2, "file_id": 12, "knowledge_revision": 63, "git_revision": "", "revision_history": [{"28": ""}, {"63": ""}], "ctags": [{"_type": "tag", "name": "OPENAI_KEY", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/utils/ai.ts", "pattern": "/^const OPENAI_KEY = process.env.EXPO_PUBLIC_OPENAI_API_KEY;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/utils/ai.ts", "pattern": "/^  const base = (input.text ?? input.url ?? '').slice(0, 400);$/", "language": "TypeScript", "kind": "constant", "scope": "generateSummary", "scopeKind": "function"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/utils/ai.ts", "pattern": "/^    const content = json?.choices?.[0]?.message?.content ?? '';$/", "language": "TypeScript", "kind": "constant", "scope": "generateSummary", "scopeKind": "function"}, {"_type": "tag", "name": "generateSummary", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/utils/ai.ts", "pattern": "/^export async function generateSummary(input: { url?: string; text?: string }): Promise<string> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "json", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/utils/ai.ts", "pattern": "/^    const json = await res.json();$/", "language": "TypeScript", "kind": "constant", "scope": "generateSummary", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/knowledge-saver-45480-40192/clipstack_frontend/src/utils/ai.ts", "pattern": "/^    const res = await fetch('https:\\/\\/api.openai.com\\/v1\\/chat\\/completions', {$/", "language": "TypeScript", "kind": "constant", "scope": "generateSummary", "scopeKind": "function"}], "hash": "58eeef43405b9d282044808d3524b359", "format-version": 4, "code-base-name": "clipstack_frontend", "filename": "clipstack_frontend/src/utils/ai.ts"}